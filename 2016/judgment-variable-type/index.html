<!DOCTYPE html><html lang=zh-cn><head><meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><title>判断变量类型的一些方法 · 云淡风轻</title><meta name=description content="判断变量类型的一些方法 - 云淡风轻"><meta name=viewport content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><link rel="short icon" type=image/x-icon href=/images/favicon.ico><link rel=stylesheet href=/scss/apollo.css><link rel=stylesheet href=//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css><!--[if lt IE 9]><script src="/scripts/html5shiv/html5shiv.min.js"></script><script src="/scripts/html5shiv/html5shiv-printshiv.min.js"></script><![endif]--><link rel=search type=application/opensearchdescription+xml href=http://ioliu.cn/atom.xml title=云淡风轻></head><body><div class=wrap><header><a href="/" class=logo-link><img src=/images/favicon.png></a><ul class="nav nav-list"><li class=nav-list-item><a href="/" target=_self class=nav-list-link>Home</a></li><li class=nav-list-item><a href="/archives/" target=_self class=nav-list-link>Archive</a></li><li class=nav-list-item><a href="/tags/" target=_self class=nav-list-link>Tags</a></li><li class=nav-list-item><a href=http://weibo.com/1842336184 target=_blank class=nav-list-link>Weibo</a></li><li class=nav-list-item><a href=https://github.com/xcss target=_blank class=nav-list-link>GitHub</a></li><li class=nav-list-item><a href=/atom.xml target=_self class=nav-list-link>Rss</a></li></ul></header><section class=container><div class=post><article class=post-block><h1 class=post-title>判断变量类型的一些方法</h1><div class=post-info>2016年9月13日<a href="/tags/JavaScript/" title=JavaScript class=post-tag>#JavaScript</a><a href="/tags/前端/" title=前端 class=post-tag>#前端</a><a href="/tags/变量类型/" title=变量类型 class=post-tag>#变量类型</a><span id="/2016/judgment-variable-type/" title=判断变量类型的一些方法 class=leancloud-visitors>-°</span><div class=cp-tip><div class=cp-scroll-x><p class=cp-post>本文作者:<a href=https:github.com/xcCss title=云淡风轻 target=_blank>云淡风轻</a></p><p class=cp-post-url>本文地址:<a href="http://ioliu.cn/2016/judgment-variable-type/" title="http://ioliu.cn/2016/judgment-variable-type/" target=_blank>http://ioliu.cn/2016/judgment-variable-type/</a></p><p class=cp-note>本文由 @云淡风轻 创作，转载请保留此声明。</p><p class=cp-note>所有权保留，请勿用作商业用途。</p></div></div></div><div class=post-content><p>久了不用，就会发现，以前会的东西都会忘记掉(或者是完全想不起来了)，不知道你们有没有遇到过这个情况 - -!</p><p>这里只是对判断<code>变量类型</code>方法的一些记录，方便以后能够随时查看。</p><h3 id=typeof><a href=#typeof class=headerlink title=typeof></a>typeof</h3><p>要判断变量类型，首先想到的就是<code>typeof</code>，但用了才知道，其结果完全不是理想中的:<br><figure class="highlight js"><table><tr><td class=code><pre><div class=line><span class=keyword>typeof</span> &#123;&#125;;  <span class=comment>//"object"</span></div><div class=line><span class=keyword>typeof</span> [];  <span class=comment>//"object"</span></div><div class=line><span class=keyword>typeof</span> <span class=string>""</span>;  <span class=comment>//"string"</span></div><div class=line><span class=keyword>typeof</span> <span class=number>0</span>;   <span class=comment>//"number"</span></div><div class=line><span class=keyword>typeof</span> <span class=function><span class=keyword>function</span>(<span class=params></span>)</span>&#123;&#125;;<span class=comment>//"function"</span></div><div class=line><span class=keyword>typeof</span> <span class=literal>true</span>;<span class=comment>//"boolean"</span></div></pre></td></tr></table></figure></p><a id=more></a><p>由上面代码可以看出，数组也是对象，所以<code>typeof</code>不是我们理想中的解决方案。</p><p>当然，有的童鞋可能会说，由于<code>length</code>是<code>Array</code>特有的属性(非绝对),那是不是可以用<code>length</code>+<code>typeof</code>来判断。</p><p>当然，这是可以的：<br><figure class="highlight js"><table><tr><td class=code><pre><div class=line><span class=keyword>var</span> arr = [<span class=number>1</span>,<span class=number>2</span>];</div><div class=line><span class=keyword>if</span>(<span class=keyword>typeof</span> arr === <span class=string>'object'</span>)&#123;</div><div class=line>    <span class=built_in>console</span>.log(<span class=keyword>typeof</span> arr.length === <span class=string>"number"</span> ? <span class=string>"array"</span> : <span class=string>"object"</span>);<span class=comment>//这里输出 "array"</span></div><div class=line>&#125;</div><div class=line><span class=comment>//...其他的就不一一罗列了</span></div></pre></td></tr></table></figure></p><p>不过这个方法不通用，如果<code>{key:value}</code>对象中有 <code>length</code> 字段呢，如：<br><figure class="highlight js"><table><tr><td class=code><pre><div class=line><span class=comment>//这种情况对于上面的代码就不适用了</span></div><div class=line><span class=keyword>var</span> obj = &#123;</div><div class=line>    <span class=attr>name</span>:<span class=string>"square"</span>,</div><div class=line>    <span class=attr>length</span>:<span class=number>50</span>,</div><div class=line>    <span class=attr>width</span>:<span class=number>50</span></div><div class=line>&#125;;</div></pre></td></tr></table></figure></p><h3 id=instanceof><a href=#instanceof class=headerlink title=instanceof></a>instanceof</h3><p>第二种解决方案就是使用<code>instanceof</code>，不过使用<code>instanceof</code>会出现<code>[] instanceof Object === true</code>的情况。这样就需要优先判断<code>Array</code>：<br><figure class="highlight js"><table><tr><td class=code><pre><div class=line><span class=keyword>var</span> a = [<span class=number>1</span>,<span class=number>2</span>,<span class=number>3</span>];</div><div class=line><span class=keyword>var</span> b = &#123;<span class=attr>name</span>:<span class=string>'zhangsan'</span>,<span class=attr>sex</span>:<span class=number>123</span>&#125;;</div><div class=line><span class=keyword>var</span> fn = <span class=function><span class=keyword>function</span>(<span class=params></span>)</span>&#123;&#125;;</div><div class=line><span class=keyword>var</span> detectType = <span class=function><span class=keyword>function</span>(<span class=params>o</span>)</span>&#123;</div><div class=line>    <span class=keyword>if</span>(o <span class=keyword>instanceof</span> <span class=built_in>Array</span>)&#123;</div><div class=line>        <span class=keyword>return</span> <span class=string>'Array'</span></div><div class=line>    &#125;<span class=keyword>else</span> <span class=keyword>if</span>( o <span class=keyword>instanceof</span> <span class=built_in>Object</span> )&#123;</div><div class=line>        <span class=keyword>return</span> <span class=string>'Object'</span>;</div><div class=line>    &#125;<span class=keyword>else</span>&#123;</div><div class=line>        <span class=keyword>return</span> <span class=string>'param is no object type'</span>;</div><div class=line>    &#125;</div><div class=line>&#125;</div><div class=line><span class=built_in>console</span>.log( detectType(a) );    <span class=comment>// Array</span></div><div class=line><span class=built_in>console</span>.log( detectType(b) );    <span class=comment>// Object</span></div><div class=line><span class=built_in>console</span>.log( detectType(<span class=number>1</span>) );    <span class=comment>// param is no object type</span></div><div class=line><span class=built_in>console</span>.log( detectType(<span class=literal>true</span>) ); <span class=comment>// param is no object type</span></div><div class=line><span class=built_in>console</span>.log( detectType(<span class=string>'a'</span>) );  <span class=comment>// param is no object type</span></div></pre></td></tr></table></figure></p><h3 id=Object-prototype-toString-call><a href=#Object-prototype-toString-call class=headerlink title=Object.prototype.toString.call></a>Object.prototype.toString.call</h3><p>还有一种最靠谱的办法就是<code>Object.prototype.toString.call</code>:<br><figure class="highlight js"><table><tr><td class=code><pre><div class=line><span class=built_in>Object</span>.prototype.toString.call([])              <span class=comment>//"[object Array]"</span></div><div class=line><span class=built_in>Object</span>.prototype.toString.call(<span class=built_in>Object</span>)          <span class=comment>//"[object Function]"</span></div><div class=line><span class=built_in>Object</span>.prototype.toString.call(<span class=function><span class=keyword>function</span> <span class=title>x</span>(<span class=params></span>)</span>&#123;&#125;)  <span class=comment>//"[object Function]"</span></div><div class=line><span class=built_in>Object</span>.prototype.toString.call(<span class=string>""</span>)              <span class=comment>//"[object String]"</span></div><div class=line><span class=built_in>Object</span>.prototype.toString.call(&#123;&#125;)              <span class=comment>//"[object Object]"</span></div><div class=line><span class=built_in>Object</span>.prototype.toString.call(<span class=literal>null</span>)            <span class=comment>//"[object Null]"</span></div><div class=line><span class=built_in>Object</span>.prototype.toString.call(<span class=literal>undefined</span>)       <span class=comment>//"[object Undefined]"</span></div><div class=line><span class=built_in>Object</span>.prototype.toString.call(<span class=regexp>/test/</span>)          <span class=comment>//"[object RegExp]"</span></div><div class=line><span class=built_in>Object</span>.prototype.toString.call(<span class=keyword>new</span> <span class=built_in>Date</span>())      <span class=comment>//"[object Date]"</span></div></pre></td></tr></table></figure></p><h3 id=参考文档><a href=#参考文档 class=headerlink title=参考文档></a>参考文档</h3><ol><li><a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString target=_blank rel=external>Object.prototype.toString()</a></li></ol></div></article></div></section><footer><div class=paginator><a href="/2016/hello-november/" class=prev>上一篇</a><a href="/2016/css-content-and-special-characters/" class=next>下一篇</a></div><div data-thread-key="2016/judgment-variable-type/" data-title=判断变量类型的一些方法 data-url="http://ioliu.cn/2016/judgment-variable-type/" data-author-key=1 class=ds-thread></div><script>var duoshuoQuery={short_name:"ioliu"};!function(){var t=document.createElement("script");t.id="duoshuo-script",t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https:":"http:")+"//dn-ds-img.qbox.me/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}();</script><script>window.CONFIG={duoshuo:{userId:"ioliu",anthor:"云淡风轻"}};</script><div class=copyright><p>© 2013 - 2016 <a href=http://ioliu.cn>云淡风轻</a>, <a href="http://www.miitbeian.gov.cn/" rel=nofollow target=_blank>粤ICP备15050037号</a> .</p><p>Powered By <a href="https://hexo.io/" rel=nofollow target=_blank>Hexo</a> and <a href=https://github.com/pinggod/hexo-theme-apollo rel=nofollow target=_blank>hexo-theme-apollo</a></p></div></footer></div><script src="/scripts/ua-parser.min.js?v=0.7.9"></script><script src=/scripts/hook-duoshuo.js></script><script src=/scripts/visibility.js></script><script src=/scripts/lazy.js></script><script>echo.lazyAttr="data-orig";</script><script>echo.init({offsetBottom:400,throttle:200,unload:!0,callback:function(t,e){}}),document.addEventListener("DOMContentLoaded",function(){echo.render()},!1);</script><script>/^http:\/\/localhost/.test(location.href)||/_@_@_@=#\$#\$#\$/.test(document.cookie)||(!function(e,t,a,o,n,c){e.GoogleAnalyticsObject=o,e[o]||(e[o]=function(){(e[o].q=e[o].q||[]).push(arguments)}),e[o].l=+new Date,n=t.createElement(a),c=t.getElementsByTagName(a)[0],n.src="https://www.google-analytics.com/analytics.js",c.parentNode.insertBefore(n,c)}(window,document,"script","ga"),ga("create","UA-61934506-1","auto"),ga("send","pageview"));</script><script>if(!/^http:\/\/localhost/.test(location.href)){var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?2119376191e432c012a0713bcca8a8ea";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()}</script><script src=https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js></script><script src=/scripts/lean-analytics.js></script><script>AV.initialize("R9cQjqaD9AXPKY7AQiU6U6yl","YHUU5n9sbvpRQCdiIU8aRsmH");</script></body></html>