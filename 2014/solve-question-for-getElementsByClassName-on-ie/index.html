<!DOCTYPE html><html lang=zh-cn><head><meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><title>解决 ByClassName 在IE中的兼容性问题 · 云淡风轻</title><meta name=description content="解决 ByClassName 在IE中的兼容性问题 - 云淡风轻"><meta name=viewport content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><link rel="short icon" type=image/x-icon href=/images/favicon.ico><link rel=stylesheet href=/scss/apollo.css><link rel=stylesheet href=//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css><!--[if lt IE 9]><script src="/scripts/html5shiv/html5shiv.min.js"></script><script src="/scripts/html5shiv/html5shiv-printshiv.min.js"></script><![endif]--><link rel=search type=application/opensearchdescription+xml href=http://ioliu.cn/atom.xml title=云淡风轻></head><body><div class=wrap><header><a href="/" class=logo-link><img src=/images/favicon.png></a><ul class="nav nav-list"><li class=nav-list-item><a href="/" target=_self class=nav-list-link>Home</a></li><li class=nav-list-item><a href="/archives/" target=_self class=nav-list-link>Archive</a></li><li class=nav-list-item><a href="/tags/" target=_self class=nav-list-link>Tags</a></li><li class=nav-list-item><a href=http://weibo.com/1842336184 target=_blank class=nav-list-link>Weibo</a></li><li class=nav-list-item><a href=https://github.com/xcss target=_blank class=nav-list-link>GitHub</a></li><li class=nav-list-item><a href=/atom.xml target=_self class=nav-list-link>Rss</a></li></ul></header><section class=container><div class=post><article class=post-block><h1 class=post-title>解决 ByClassName 在IE中的兼容性问题</h1><div class=post-info>2014年5月22日<a href="/tags/JavaScript/" title=JavaScript class=post-tag>#JavaScript</a><a href="/tags/前端/" title=前端 class=post-tag>#前端</a><a href="/tags/getElementsByClassName/" title=getElementsByClassName class=post-tag>#getElementsByClassName</a><a href="/tags/IE兼容性/" title=IE兼容性 class=post-tag>#IE兼容性</a><span id="/2014/solve-question-for-getElementsByClassName-on-ie/" title="解决 ByClassName 在IE中的兼容性问题" class=leancloud-visitors>-°</span><div class=cp-tip><div class=cp-scroll-x><p class=cp-post>本文作者:<a href=https:github.com/xcCss title=云淡风轻 target=_blank>云淡风轻</a></p><p class=cp-post-url>本文地址:<a href="http://ioliu.cn/2014/solve-question-for-getElementsByClassName-on-ie/" title="http://ioliu.cn/2014/solve-question-for-getElementsByClassName-on-ie/" target=_blank>http://ioliu.cn/2014/solve-question-for-getElementsByClassName-on-ie/</a></p><p class=cp-note>本文由 @云淡风轻 创作，转载请保留此声明。</p><p class=cp-note>所有权保留，请勿用作商业用途。</p></div></div></div><div class=post-content><p><img src=/images/placeholder.gif data-orig=https://ws4.sinaimg.cn/large/006qRazegw1f41ptt98crj30jg05kmx5.jpg alt=""></p><p>最近遇到一个<code>document.getElementsByClassName</code>在IE中的兼容性问题，有兼容性问题的代码如下：<br><figure class="highlight js"><table><tr><td class=code><pre><div class=line><span class=built_in>window</span>.onload = <span class=function><span class=keyword>function</span>(<span class=params></span>)</span>&#123;</div><div class=line>    <span class=keyword>var</span> checkInput = <span class=built_in>document</span>.getElementsByClassName(<span class=string>"check"</span>);</div><div class=line>    alert(checkInput.length);</div><div class=line>&#125;</div></pre></td></tr></table></figure></p><a id=more></a><p>在IE的低版本中会出现如图所示的问题：<br><img src=/images/placeholder.gif data-orig=https://ws3.sinaimg.cn/large/0060lm7Tgw1f4a25f9llsj30ha04s0tt.jpg alt=error><br>参考了网上的一些代码与视频，解决代码如下：</p><figure class="highlight js"><table><tr><td class=code><pre><div class=line><span class=built_in>window</span>.onload = <span class=function><span class=keyword>function</span>(<span class=params></span>)</span>&#123;</div><div class=line>    <span class=keyword>if</span>(!<span class=built_in>document</span>.getElementsByClassName)&#123;</div><div class=line>        <span class=built_in>document</span>.getElementsByClassName = <span class=function><span class=keyword>function</span> (<span class=params>cls</span>)</span>&#123;</div><div class=line>            <span class=keyword>var</span> ret = [];</div><div class=line>            <span class=keyword>var</span> els = <span class=built_in>document</span>.getElementsByTagName(<span class=string>'*'</span>);</div><div class=line>            <span class=keyword>for</span>(<span class=keyword>var</span> i = <span class=number>0</span> ; i &lt; els.length; i++)&#123;</div><div class=line>                <span class=keyword>if</span>(els[i].className === cls </div><div class=line>                   || els[i].className.indexOf(cls + <span class=string>' '</span>) &gt; <span class=number>-1</span> </div><div class=line>                   || els[i].className.indexOf(<span class=string>' '</span> + cls + <span class=string>' '</span>) &gt; <span class=number>-1</span> </div><div class=line>                   || els[i].className.indexOf(<span class=string>' '</span> + cls) &gt; <span class=number>-1</span>)&#123;</div><div class=line>                   ret.push(els[i]);</div><div class=line>                &#125;    </div><div class=line>            &#125;</div><div class=line>            <span class=keyword>return</span> ret;</div><div class=line>        &#125;</div><div class=line>    &#125;</div><div class=line>    <span class=keyword>var</span> checkInput = <span class=built_in>document</span>.getElementsByClassName(<span class=string>"check"</span>);</div><div class=line>    alert(checkInput.length);</div><div class=line>&#125;</div></pre></td></tr></table></figure><blockquote><p>相关资料:<br><a href=https://developer.mozilla.org/en-US/docs/Web/API/document/getElementsByTagName target=_blank rel=external>getElementsByTagName</a></p></blockquote></div></article></div></section><footer><div class=paginator><a href="/2015/hexo-your-blog/" class=prev>上一篇</a><a href="/2014/brackets/" class=next>下一篇</a></div><div data-thread-key="2014/solve-question-for-getElementsByClassName-on-ie/" data-title="解决 ByClassName 在IE中的兼容性问题" data-url="http://ioliu.cn/2014/solve-question-for-getElementsByClassName-on-ie/" data-author-key=1 class=ds-thread></div><script>var duoshuoQuery={short_name:"ioliu"};!function(){var t=document.createElement("script");t.id="duoshuo-script",t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https:":"http:")+"//dn-ds-img.qbox.me/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}();</script><script>window.CONFIG={duoshuo:{userId:"ioliu",anthor:"云淡风轻"}};</script><div class=copyright><p>© 2013 - 2017 <a href=http://ioliu.cn>云淡风轻</a>, <a href="http://www.miitbeian.gov.cn/" rel=nofollow target=_blank>粤ICP备15050037号</a> .</p><p>Powered By <a href="https://hexo.io/" rel=nofollow target=_blank>Hexo</a> and <a href=https://github.com/pinggod/hexo-theme-apollo rel=nofollow target=_blank>hexo-theme-apollo</a></p></div></footer></div><script src="/scripts/ua-parser.min.js?v=0.7.9"></script><script src=/scripts/hook-duoshuo.js></script><script src=/scripts/visibility.js></script><script src=/scripts/lazy.js></script><script>echo.lazyAttr="data-orig";</script><script>echo.init({offsetBottom:400,throttle:200,unload:!0,callback:function(t,e){}}),document.addEventListener("DOMContentLoaded",function(){echo.render()},!1);</script><script>/^http:\/\/localhost/.test(location.href)||/_@_@_@=#\$#\$#\$/.test(document.cookie)||(!function(e,t,a,o,n,c){e.GoogleAnalyticsObject=o,e[o]||(e[o]=function(){(e[o].q=e[o].q||[]).push(arguments)}),e[o].l=+new Date,n=t.createElement(a),c=t.getElementsByTagName(a)[0],n.src="https://www.google-analytics.com/analytics.js",c.parentNode.insertBefore(n,c)}(window,document,"script","ga"),ga("create","UA-61934506-1","auto"),ga("send","pageview"));</script><script>if(!/^http:\/\/localhost/.test(location.href)){var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?2119376191e432c012a0713bcca8a8ea";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()}</script><script src=https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js></script><script src=/scripts/lean-analytics.js></script><script>AV.initialize("R9cQjqaD9AXPKY7AQiU6U6yl","YHUU5n9sbvpRQCdiIU8aRsmH");</script></body></html>